name: CD

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    # NOTE: Deployment steps are commented out because deployment is handled automatically
    # via Google Cloud Run which is linked to the main branch. This avoids duplicated
    # deployment jobs and ensures a single source of truth for deployments.
    steps:
      - name: Deployment handled by Google Cloud Run
        run: echo "Deployment is automatically handled by Google Cloud Run linked to main branch"
    # Original deployment steps (commented out):
    #   - uses: actions/checkout@v3
    #   - uses: google-github-actions/setup-gcloud@v1
    #     with:
    #       service_account_key: ${{ secrets.GCP_SA_KEY }}
    #       project_id: ${{ secrets.GCP_PROJECT_ID }}
    #   - run: gcloud auth configure-docker
    #   - run: |
    #       IMAGE=gcr.io/${{ secrets.GCP_PROJECT_ID }}/latam-delay-api
    #       docker build -t $IMAGE .
    #       docker push $IMAGE
    #       gcloud run deploy latam-delay-api \
    #         --image $IMAGE \
    #         --platform managed \
    #         --region us-central1 \
    #         --allow-unauthenticated \
    #         --memory 2Gi \
    #         --cpu 2 \
    #         --timeout 300 \
    #         --max-instances 10
